      - name: Commit and push directly
        id: direct-push
        run: |
          git add .github/keepalive.log
          git commit -m "KeepAlive: $(date -u)" || echo "no changes"
          git push && echo "pushed=yes" >> $GITHUB_OUTPUT || echo "pushed=no" >> $GITHUB_OUTPUT

      - name: Create PR if push blocked
        if: steps.direct-push.outputs.pushed == 'no'
        uses: peter-evans/create-pull-request@v6
        with:
          commit-message: "KeepAlive: $(date -u)"
          title: "KeepAlive bot — $(date -u)"
          body: "Commit automatique pour garder le dépôt actif."
          branch: keepalive-bot
          delete-branch: true
